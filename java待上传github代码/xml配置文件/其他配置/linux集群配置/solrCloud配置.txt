ip和端口可能有误，自行修改

1、把配置好的solrHome(包含仓库core信息等)和包含solr项目的tomcat复制粘贴到linux，
修改tomcat里solr的web.xml第43行的位置成solrHome的地址(collection1等core所在的目录).


2、修改每个tomcat/bin/catalina.sh,把此配置替换第234行(java_opts所在的行)：
JAVA_OPTS="-DzkHost=192.168.25.140:2181,192.168.25.140:2182,192.168.25.140:2183"
这3个地址就是zookeeper的3个注册地址,是用来设置JVM相关运行参数的变量.  
此配置作用是在tomcat启动时找到zookeeper集群。
注意原来234行的内容是：
#JAVA_OPTS="$JAVA_OPTS -Dorg.apache.catalina.security.SecurityListener.UMASK=`umask`"
要把这一整行替换掉，且不能带上中文符号(空格等)，不然报错未预期的符号 `(' 附近有语法错误


3、配置solrCloud相关的配置。每个 solrhome 下都有一个 solr.xml，把其中的 ip 及端口号配置好（是对应的tomcat的IP和端口）。
即修改  <solrcloud>里的<str name="host">和<int name="hostPort">的值。


4、让 zookeeper 统一管理配置文件。需要把 solrhome下collection1/conf 目录上传到
zookeeper。上传任意 solrhome 中的配置文件即可。我们需要使用solr给我们提供的工具上传配置文件：
solr-4.10.3/example/scripts/cloud-scripts/zkcli.sh
将solr-4.10.3压缩包上传到linux，解压，然后进入solr-4.10.3/example/scripts/cloud-scripts目录 ，执行下列命令(不要有换行符)
./zkcli.sh -zkhost 192.168.25.140:2181,192.168.25.140:2182,192.168.25.140:2183 -cmd upconfig -confdir /usr/local/solrhomes/solrhome-1/collection1/conf -confname myconf
参数解释
-zkhost  ：指定zookeeper地址列表
-cmd    ：指定命令。upconfig 为上传配置的命令
-confdir  : 配置文件所在目录
-confname : 配置名称

执行命令时可能报错找不到或无法加载主类 org.apache.solr.cloud.ZkCLI，
解决方法见https://blog.csdn.net/justweb/article/details/78310739，
我在solr-4.10.3/example目录下执行完 java -jar start.jar 命令ctrl+c退出后也解决了问题


完成后上述步骤后在zookeeper不重启的情况下开启solr的tomcat，报错503，查看tomcat日志，
提示collection1(core)有两个，一个是solrhome原有，一个是solr-4.10.3的(我把这个包解压在solrhome)，
删除此包后bug解决。