
第14章：国际物流云商项目：
================================================================================

day01：
1、测试发现在父项目的pluginManagement配置jdk1.7插件，子项目子模块都不需要再配置

2、框架集笔记见 \00-一些笔记\复习笔记\框架集笔记

3、以前ssh使用LocalSessionFactoryBean创建hibernateTemplate并使用相应的事务管理和在web.xml里配置延迟加载，这次使用LocalContainerEntityManagerFactoryBean，事务管理和延迟加载都要用和这个对应的，jpa要额外配置：
	<jpa:repositories base-package="cn.itcast.dao"
		transaction-manager-ref="transactionManager"
		entity-manager-factory-ref="entityManagerFactory"></jpa:repositories>

4、Struts2配置文件动态传参(即怎么把action的参数传到result)：
	xml方法：
		第一个Action有如下代码：
		 private String url; private String name; private String id;
		 必须有相应的get set方法;根据动态url跳转到不同的Action；
		配置文件如下代码如下： 
		 <action name="..." class="...">
			<result name="aaa">${url}?name=${name}&amp;id=${id}</result>
		 </action>
	注解方法：
		@Namespace("/")
		@Result(name = "tomain", location ="/${moduleName}/main.jsp")
		public class HomeAction extends BaseAction {
			private String moduleName; 
			public String getModuleName() {
				return moduleName;
			}
			public void setModuleName(String moduleName) {
				this.moduleName = moduleName;
			}	

================================================================================

day02：
1、在base.jsp里如下配置，然后其他页面<%@ include file="base.jsp"%>，可以获取通用的资源和变量
	<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
	<%@ page language="java" isELIgnored="false" pageEncoding="UTF-8"%>
	<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
	<%@ taglib uri="/struts-tags" prefix="s" %>
	<c:set var="ctx" value="${pageContext.request.contextPath}"/>

	<link rel="stylesheet" rev="stylesheet" type="text/css" href="${ctx}/skin/default/css/default.css" media="all"/>
	<link rel="stylesheet" rev="stylesheet" type="text/css" href="${ctx}/skin/default/css/table.css" media="all"/>
	<script language="javascript" src="${ctx}/js/common.js"></script>

测试发现如果a.jsp里include b.jsp，<%@ page language="java" pageEncoding="UTF-8"%>这种标签需要在a和b里都写，不写的话该页面报错中文会提示，<%@taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>也必须写，不写的页面不能使用jstl标签库，像css、js这些静态资源只能写在一个页面，否则后面的页面会多次引用。

2、spring data jpa是spring框架提供的持久层的解决方案，jpa是sun推出的标准，hibernate有两种操作数据库的方案(sessionfactory/session和entitymanagerfactory/entitymanager)，两种方法在web.xml的配置大致相同，只是spring data jpa需要多配置一个	
	<jpa:repositories base-package="cn.itcast.dao"
		transaction-manager-ref="transactionManager"
		entity-manager-factory-ref="entityManagerFactory">
	</jpa:repositories>，这样可以不用写dao的实现类。
	
3、配置实体类，@GeneratedValue的标签有4种参数，mysql用identity，oracle用sequence，没有uuid，所以要使用hibernate的uuid主键生成方式，配置方法如下：
	@GeneratedValue(generator = "system-uuid")
	@GenericGenerator(name = "system-uuid", strategy = "uuid")
	private String id;// 编号

4、使用spring-data-jpa写接口就可，不用写实现类。接口需要继承JpaRepository和JpaSpecificationExecutor，分别用来操作数据库和创建Specification封装查询条件。

5、配置jpa报错No property ... found for...Did you mean '...'?原因是dao接口里方法定义有问题，比如方法名或者参数，导致spring-data-jpa无法实现它

6、jpa使用sql语句查询，这里是oracle数据库：
	@Query(value = "select * from Dept_p where dept_Name like ? and parent_id=?", nativeQuery = true) 
	public List<Dept> f(String s1, String s2);

7、翻页代码：点击翻页触发js方法提交表单到action，相关的全部js代码在后台代码里封装，
包括action的地址，以前试过很多情况下前台js获取不到当前地址，这次的获取方法是top.frames[2].location.href。

================================================================================

day03：
1、<s:select name="parent.id" list="deptList" headerKey="fuckyou" headerValue="--请选择--" listKey="id" listValue="deptName"></s:select>
在页面上显示：
	<select name="parent.id" id="parent_id">
		<option value="fuckyou">--请选择--</option>
		<option value="40289181670ca07601670ca07e400000">测试部门</option>
		<option value="4028827c4fb6202a014fb6209c730000">总裁办</option>
		<option value="4028827c4fb633bd014fb64467470000">财务部</option>
		<option value="402891816724e769016724e78a050000">测试部门</option>
	</select>
select的id是由name生成的，deptList是put在值栈的，listKey是option的value，listValue是option的文本。

2、

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================================================================================================

================================================================================

================================================================================

================================================================================
================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================

================================================================================
